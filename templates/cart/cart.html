{% extends 'base.html' %}
{% load static %}
{% block content%}
<link rel="shortcut icon" href="https://amansfood.com/favicon.ico">

  <!-- Font -->
  <link href="{% static '/cart_files/css2' %}" rel="stylesheet">

  <!-- CSS Implementing Plugins -->
  <link rel="stylesheet" href="{% static '/cart_files/vendor.min.css' %}">
  <link rel="stylesheet" href="{% static '/cart_files/bootstrap-icons.css' %}">

  <!-- CSS Ecome Template -->
  <link rel="stylesheet" href="{% static '/cart_files/theme.minc619.css' %}">  <script src="{% static '/cart_files/jquery-3.6.1.min.js' %}" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<style class="fslightbox-styles">.fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightbox-loader{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightbox-loader div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightbox-loader 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightbox-loader div:nth-child(1){animation-delay:-.45s}.fslightbox-loader div:nth-child(2){animation-delay:-.3s}.fslightbox-loader div:nth-child(3){animation-delay:-.15s}@keyframes fslightbox-loader{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}</style><script src="./cart_files/clipboard.min.js"></script></head>


<!-- ========== MAIN CONTENT ========== -->
<main id="content" role="main">
    	
	<!-- Content -->
    <div class="container content-space-1 content-space-lg-2">
      <div class="row">
        <div class="col-lg-12 mb-7 mb-lg-0">
          <!-- Heading -->
          <div class="d-flex justify-content-between align-items-end border-bottom pb-3 mb-7">
            <h1 class="h3 mb-0">Shopping cart</h1>
            			<span>{{cart | length}} items</span>
          </div>
          <!-- End Heading -->
		  
		  
		  <div class="card card-sm shadow-sm mb-4 p-5-lg">
			<div class="card-header">
			  <!-- Form -->
			  <form action="{% url 'qty_update' %}" method="post" enctype="multipart/form-data">
         {% csrf_token %}
				<!-- List Group -->
				<ul class="list-group list-group-flush list-group-no-gutters mb-5">
									  
				  {% for item in cart %}
				  
				  <!-- Item -->
				  <li class="list-group-item">
					<div class="d-flex align-items-center">
					  <div class="flex-shrink-0">
						<img class="avatar avatar-xl avatar-4x3" src="{{item.product.product_img.url}}" alt="Image Description">
					  </div>

					  <div class="flex-grow-1 ms-3 ">
						<div class="row">
						  <div class="col-sm-7 mb-3 mb-sm-0">
							<h5><a class="text-dark" href="https://amansfood.com/product-overview.php?product=202">{{item.product.product_name}}</a></h5>
							<p>{{item.product.quantity_label}}</p>
							<p>${{item.product.price}}</p>
							<p>{{item.quantity}} items</p>
              <p>Total : ${{item.total_price}}</p>

						   </div>
						  <!-- End Col -->

						  <div class="col-sm-3">
							<div class="row">
							  <div class="col-auto">
								<!-- Select -->
								<select class="form-select form-select-sm mb-3" id="qty88" name="qty88" required="">
									<option>1</option>
									<option value="88|1">1</option>
									<option value="88|2">2</option>
									<option value="88|3">3</option>
									<option value="88|4">4</option>
									<option value="88|5">5</option>
									<option value="88|6">6</option>
									<option value="88|7">7</option>
									<option value="88|8">8</option>
									<option value="88|9">9</option>
									<option value="88|10">10</option>
								</select>
								<!-- End Select -->
							  </div>
							  <!-- End Col -->
							</div>
							<!-- End Row -->
							<script>
							$(document).ready(function(){
							$("#qty88").change(function(){
							var newqty = this.value;
							console.log(newqty)
							$.ajax({
							url: 'cart-updateqty-api.php',
							method: 'post',
							data: {newqty:newqty},
							success:function(response){
							location.reload(true);
							}
							});
							});
							});
						  </script>
						  </div>
						  <!-- End Col -->
						  

						  <div class="col-sm-2 d-sm-inline-block text-right">
							<div class="col-auto">
								<div class="d-grid gap-2">
									<a href="{% url 'cart_remove' item.product.pk %}" class="link-sm link-secondary small lead" onclick="return confirm(&#39;Are you sure you want to remove this product ?&#39;);">
										<i class="bi-trash me-1"></i> Remove
									</a>
								</div>
							</div>		
						  </div>
						  <!-- End Col -->
						</div>
						<!-- End Row -->
					  </div>
					</div>
				  </li>
				  <!-- End Item -->
							{% endfor %}		  
				  
				 {{total_price}}
									  
				</ul>
				<!-- End List Group -->

				<div class="d-flex justify-content-between justify-content-sm-between">
				  <div class="col m-1">
					<a class="btn btn-sm btn-primary float-lg-start float-sm-start" href="https://amansfood.com/product.php">
						<i class="bi-chevron-left small ms-1"></i> Continue shopping
					</a>
				  </div>
				  <div class="col m-1">
					<input type="hidden" name="cart_id[]" value="86">
					<button class="btn btn-sm btn-primary float-lg-end float-sm-end" type="submit" name="login_user_with_product">Proceed to Checkout <i class="bi bi-chevron-compact-right"></i></button>
				  </div>
				  
				</div>
      </form>
			  
			  <!-- End Form -->
			</div> 
		  </div>
        </div>
        <!-- End Col -->
	  </div>
	</div> 
		
    

    

    
  </main>
  <!-- ========== END MAIN CONTENT ========== -->


 <!-- JS Implementing Plugins -->
 <script src="./cart_files/vendor.min.js"></script>

 <!-- JS Ecome -->
 <script src="./cart_files/theme.min.js"></script>

 <!-- JS Plugins Init. -->
 <script>
   (function() {
     // INITIALIZATION OF MEGA MENU
     // =======================================================
     new HSMegaMenu('.js-mega-menu', {
         desktop: {
           position: 'left'
         }
       })


     // INITIALIZATION OF SHOW ANIMATIONS
     // =======================================================
     new HSShowAnimation('.js-animation-link')


     // INITIALIZATION OF BOOTSTRAP VALIDATION
     // =======================================================
     HSBsValidation.init('.js-validate', {
       onSubmit: data => {
         data.event.preventDefault()
         alert('Submited')
       }
     })


     // INITIALIZATION OF BOOTSTRAP DROPDOWN
     // =======================================================
     HSBsDropdown.init()


     // INITIALIZATION OF GO TO
     // =======================================================
     new HSGoTo('.js-go-to')


     // INITIALIZATION OF SWIPER
     // =======================================================
     var sliderThumbs = new Swiper('.js-swiper-shop-hero-thumbs', {
       watchSlidesVisibility: true,
       watchSlidesProgress: true,
       history: false,
       slidesPerView: 3,
       spaceBetween: 15,
       on: {
         beforeInit: (swiper) => {
           const css = `.swiper-slide-thumb-active .swiper-thumb-progress .swiper-thumb-progress-path {
                 opacity: 1;
                 -webkit-animation: ${swiper.originalParams.autoplay.delay}ms linear 0ms forwards swiperThumbProgressDash;
                 animation: ${swiper.originalParams.autoplay.delay}ms linear 0ms forwards swiperThumbProgressDash;
             }`
             style = document.createElement('style')
           document.head.appendChild(style)
           style.type = 'text/css'
           style.appendChild(document.createTextNode(css));

           swiper.el.querySelectorAll('.js-swiper-thumb-progress')
           .forEach(slide => {
             slide.insertAdjacentHTML('beforeend', '<span class="swiper-thumb-progress"><svg version="1.1" viewBox="0 0 160 160"><path class="swiper-thumb-progress-path" d="M 79.98452083651917 4.000001576345426 A 76 76 0 1 1 79.89443752470656 4.0000733121155605 Z"></path></svg></span>')
           })
         },
       },
     });

     var swiper = new Swiper('.js-swiper-shop-classic-hero',{
       autoplay: true,
       loop: true,
       navigation: {
         nextEl: '.js-swiper-shop-classic-hero-button-next',
         prevEl: '.js-swiper-shop-classic-hero-button-prev',
       },
       thumbs: {
         swiper: sliderThumbs
       }
     });


     // INITIALIZATION OF COUNTDOWN
     // =======================================================
     const oneYearFromNow = new Date()

     document.querySelectorAll('.js-countdown').forEach(item => {
       const days = item.querySelector('.js-cd-days'),
         hours = item.querySelector('.js-cd-hours'),
         minutes = item.querySelector('.js-cd-minutes'),
         seconds = item.querySelector('.js-cd-seconds')

       countdown(oneYearFromNow.setFullYear(
         oneYearFromNow.getFullYear() + 1),
         ts => {
           days.innerHTML = ts.days
           hours.innerHTML = ts.hours
           minutes.innerHTML = ts.minutes
           seconds.innerHTML = ts.seconds
         },
         countdown.DAYS | countdown.HOURS | countdown.MINUTES | countdown.SECONDS
       )
     })
   })()
 </script>

{% endblock %}


